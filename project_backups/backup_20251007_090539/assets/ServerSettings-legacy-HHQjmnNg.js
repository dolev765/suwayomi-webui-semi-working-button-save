!function(){function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,s,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function l(r,n,a,o){var l=n&&n.prototype instanceof d?n:d,u=Object.create(l.prototype);return t(u,"_invoke",function(r,t,n){var a,o,l,d=0,u=n||[],c=!1,g={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(r,t){return a=r,o=0,l=e,g.n=t,i}};function f(r,t){for(o=r,l=t,s=0;!c&&d&&!n&&s<u.length;s++){var n,a=u[s],f=g.p,p=a[2];r>3?(n=p===t)&&(l=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=f&&((n=r<2&&f<a[1])?(o=0,g.v=t,g.n=a[1]):f<p&&(n=r<3||a[0]>t||t>p)&&(a[4]=r,a[5]=t,g.n=p,o=0))}if(n||r>1)return i;throw c=!0,t}return function(n,u,p){if(d>1)throw TypeError("Generator is already running");for(c&&1===u&&f(u,p),o=u,l=p;(s=o<2?e:l)||!c;){a||(o?o<3?(o>1&&(g.n=-1),f(o,l)):g.n=l:g.v=l);try{if(d=2,a){if(o||(n="next"),s=a[n]){if(!(s=s.call(a,l)))throw TypeError("iterator result is not an object");if(!s.done)return s;l=s.value,o<2&&(o=0)}else 1===o&&(s=a.return)&&s.call(a),o<2&&(l=TypeError("The iterator does not provide a '"+n+"' method"),o=1);a=e}else if((s=(c=g.n<0)?l:r.call(t,g))!==i)break}catch(s){a=e,o=1,l=s}finally{d=1}}return{value:s,done:c}}}(r,a,o),!0),u}var i={};function d(){}function u(){}function c(){}s=Object.getPrototypeOf;var g=[][a]?s(s([][a]())):(t(s={},a,function(){return this}),s),f=c.prototype=d.prototype=Object.create(g);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,t(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=c,t(f,"constructor",c),t(c,"constructor",u),u.displayName="GeneratorFunction",t(c,o,"GeneratorFunction"),t(f),t(f,o,"Generator"),t(f,a,function(){return this}),t(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:l,m:p}})()}function t(e,r,s,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}t=function(e,r,s,n){function o(r,s){t(e,r,function(e){return this._invoke(r,s,e)})}r?a?a(e,r,{value:s,enumerable:!n,configurable:!n,writable:!n}):e[r]=s:(o("next",0),o("throw",1),o("return",2))},t(e,r,s,n)}function s(r,t,s){return(t=function(r){var t=function(r,t){if("object"!=e(r)||!r)return r;var s=r[Symbol.toPrimitive];if(void 0!==s){var n=s.call(r,t||"default");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}(r,"string");return"symbol"==e(t)?t:t+""}(t))in r?Object.defineProperty(r,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[t]=s,r}function n(e,r,t,s,n,a,o){try{var l=e[a](o),i=l.value}catch(e){return void t(e)}l.done?r(i):Promise.resolve(i).then(s,n)}function a(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var s,n,a,o,l=[],i=!0,d=!1;try{if(a=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;i=!1}else for(;!(i=(s=a.call(t)).done)&&(l.push(s.value),l.length!==r);i=!0);}catch(e){d=!0,n=e}finally{try{if(!i&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(d)throw n}}return l}}(e,r)||function(e,r){if(e){if("string"==typeof e)return o(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,s=Array(r);t<r;t++)s[t]=e[t];return s}System.register(["./index-legacy-DbvsbuFI.js","./TextSetting-legacy-Cib3Ex8R.js","./NumberSetting-legacy-Bm02wQ7l.js","./SelectSetting-legacy-LW2U6I_s.js","./EmptyViewAbsoluteCentered-legacy-CZb4FyHT.js","./useAppTitle-legacy-oE1eilGc.js","./Switch-legacy-DtSfVgi4.js","./ListSubheader-legacy-D6CTP6K_.js","./Trans-legacy-CGoMohzr.js","./Link-legacy-BEiZM1k4.js","./Slider-legacy-Dx30W6c-.js","./Select-legacy-SzY7YSW6.js","./SwitchBase-legacy-WgGrSGAu.js"],function(e,t){"use strict";var o,l,i,d,u,c,g,f,p,h,v,m,b,y,x,j,S,_,k,w,P,C,U,T,E,O,F,V,N,A,L;return{setters:[function(e){o=e.u,l=e.ay,i=e.j,d=e.r,u=e.a,c=e.b,g=e.H,f=e.o,p=e.p,h=e.y,v=e.e,m=e.g,b=e.f,y=e.bC,x=e.bD,j=e.bE,S=e.b0,_=e.bF,k=e.bG,w=e.m,P=e.aA,C=e.bH},function(e){U=e.T},function(e){T=e.N},function(e){E=e.S},function(e){O=e.E},function(e){F=e.u},function(e){V=e.S},function(e){N=e.L},function(e){A=e.T},function(e){L=e.L},null,null,null],execute:function(){var t=function(){var e=o().t,r=a(l("serverBaseURL",window.location.origin),2),t=r[0],s=r[1];return i.jsx(U,{settingName:e("settings.about.server.label.address"),handleChange:function(e){var r=e.replaceAll(/(\/)+$/g,"");s(r),d.reset()},value:t,placeholder:"http://localhost:4567"})},z=function(e){return 0===e?P("global.label.never"):P("settings.server.misc.log_files.file_cleanup.value",{days:e,count:e})};e("ServerSettings",function(){var e,l,P=o().t;F(P("settings.server.title.server"));var R=u(),D=R.settings.serverInformAvailableUpdate,M=R.loading,B=R.request,I=B.error,G=B.refetch,H=h(function(e){return w(P("global.error.label.failed_to_save_changes"),"error",m(e))}),$=d.useGetServerSettings({notifyOnNetworkStatusChange:!0}),K=$.data,q=$.loading,X=$.error,J=$.refetch,Q=a(d.useUpdateServerSettings(),1)[0],W=function(){var e,t=(e=r().m(function e(t,n,a){var o;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Q({variables:{input:{settings:s({},t,n)}}});case 1:null==a||a(!0),e.n=3;break;case 2:e.p=2,o=e.v,w(P("global.error.label.failed_to_save_changes"),"error",m(o)),null==a||a(!1);case 3:return e.a(2)}},e,null,[[0,2]])}),function(){var r=this,t=arguments;return new Promise(function(s,a){var o=e.apply(r,t);function l(e){n(o,s,a,l,i,"next",e)}function i(e){n(o,s,a,l,i,"throw",e)}l(void 0)})});return function(e,r,s){return t.apply(this,arguments)}}(),Y=c.useMemo(function(){return i.jsxs(g,{subheader:i.jsx(N,{component:"div",id:"server-settings-client",children:P("global.label.client")}),children:[i.jsx(t,{}),i.jsxs(f,{children:[i.jsx(p,{primary:P("global.update.settings.inform.label.title"),secondary:P("global.update.settings.inform.label.description")}),i.jsx(V,{edge:"end",checked:D,onChange:function(e){return H("serverInformAvailableUpdate",e.target.checked)}})]})]})},[D]);if(M||q)return i.jsxs(i.Fragment,{children:[Y,i.jsx(v,{})]});var Z=null!=I?I:X;if(Z)return i.jsxs(i.Fragment,{children:[Y,i.jsx(O,{message:P("global.error.label.failed_to_load_data"),messageExtra:m(Z),retry:function(){I&&G().catch(b()),X&&J().catch(b())}})]});var ee,re={ip:(ee=K.settings).ip,port:ee.port,socksProxyEnabled:ee.socksProxyEnabled,socksProxyVersion:ee.socksProxyVersion,socksProxyHost:ee.socksProxyHost,socksProxyPort:ee.socksProxyPort,socksProxyUsername:ee.socksProxyUsername,socksProxyPassword:ee.socksProxyPassword,debugLogsEnabled:ee.debugLogsEnabled,systemTrayEnabled:ee.systemTrayEnabled,maxLogFiles:ee.maxLogFiles,maxLogFileSize:ee.maxLogFileSize,maxLogFolderSize:ee.maxLogFolderSize,authMode:ee.authMode,authUsername:ee.authUsername,authPassword:ee.authPassword,jwtAudience:ee.jwtAudience,jwtTokenExpiry:ee.jwtTokenExpiry,jwtRefreshExpiry:ee.jwtRefreshExpiry,flareSolverrEnabled:ee.flareSolverrEnabled,flareSolverrTimeout:ee.flareSolverrTimeout,flareSolverrUrl:ee.flareSolverrUrl,flareSolverrSessionName:ee.flareSolverrSessionName,flareSolverrSessionTtl:ee.flareSolverrSessionTtl,flareSolverrAsResponseFallback:ee.flareSolverrAsResponseFallback,opdsUseBinaryFileSizes:ee.opdsUseBinaryFileSizes,opdsItemsPerPage:ee.opdsItemsPerPage,opdsEnablePageReadProgress:ee.opdsEnablePageReadProgress,opdsMarkAsReadOnDownload:ee.opdsMarkAsReadOnDownload,opdsShowOnlyUnreadChapters:ee.opdsShowOnlyUnreadChapters,opdsShowOnlyDownloadedChapters:ee.opdsShowOnlyDownloadedChapters,opdsChapterSortOrder:ee.opdsChapterSortOrder},te=!(null!==(e=re.authUsername)&&void 0!==e&&e.trim()&&null!==(l=re.authPassword)&&void 0!==l&&l.trim());return i.jsxs(g,{sx:{pt:0},children:[Y,i.jsxs(g,{subheader:i.jsx(N,{component:"div",id:"server-settings-server-address",children:P("settings.server.address.server.title")}),children:[i.jsx(U,{settingName:P("settings.server.address.server.label.ip"),handleChange:function(e){return W("ip",e)},value:re.ip,placeholder:"0.0.0.0"}),i.jsx(T,{settingTitle:P("settings.server.address.server.label.port"),settingValue:re.port.toString(),handleUpdate:function(e){return W("port",e)},value:re.port,defaultValue:4567,valueUnit:P("settings.server.address.server.label.port")})]}),i.jsxs(g,{subheader:i.jsx(N,{component:"div",id:"server-settings-socks-proxy",children:P("settings.server.socks_proxy.title")}),children:[i.jsxs(f,{children:[i.jsx(p,{primary:P("settings.server.socks_proxy.label.enable")}),i.jsx(V,{edge:"end",checked:re.socksProxyEnabled,onChange:function(e){return W("socksProxyEnabled",e.target.checked)}})]}),i.jsx(E,{settingName:P("settings.server.socks_proxy.label.version"),value:re.socksProxyVersion,values:[[4,{text:"4"}],[5,{text:"5"}]],handleChange:function(e){return W("socksProxyVersion",e)}}),i.jsx(U,{settingName:P("settings.server.socks_proxy.label.host"),value:re.socksProxyHost,handleChange:function(e){return W("socksProxyHost",e)}}),i.jsx(U,{settingName:P("settings.server.socks_proxy.label.port"),value:re.socksProxyPort,handleChange:function(e){return W("socksProxyPort",e)}}),i.jsx(U,{settingName:P("settings.server.socks_proxy.label.username"),value:re.socksProxyUsername,handleChange:function(e){return W("socksProxyUsername",e)}}),i.jsx(U,{settingName:P("settings.server.socks_proxy.label.password"),value:re.socksProxyPassword,handleChange:function(e){return W("socksProxyPassword",e)},isPassword:!0})]}),i.jsxs(g,{subheader:i.jsx(N,{component:"div",id:"server-settings-auth",children:P("settings.server.auth.title")}),children:[i.jsx(E,{settingName:P("settings.server.auth.label.title"),value:re.authMode,values:y,handleChange:function(e){W("authMode",e,function(r){r&&(e!==x.UiLogin&&C.removeTokens(),C.setAuthRequired(e===x.UiLogin))})},disabled:te}),i.jsx(U,{settingName:P("settings.server.auth.label.username"),value:re.authUsername,validate:function(e){return re.authMode===x.None||!!e.trim()},handleChange:function(e){return W("authUsername",e)}}),i.jsx(U,{settingName:P("settings.server.auth.label.password"),value:re.authPassword,isPassword:!0,validate:function(e){return re.authMode===x.None||!!e.trim()},handleChange:function(e){return W("authPassword",e)}}),re.authMode===x.UiLogin&&i.jsxs(i.Fragment,{children:[i.jsx(U,{settingName:P("settings.server.auth.jwt.audience"),value:re.jwtAudience,handleChange:function(e){return W("jwtAudience",e)}}),i.jsx(T,{settingTitle:P("settings.server.auth.jwt.access_token_expiry"),settingValue:S.duration(re.jwtTokenExpiry).humanize(),value:S.duration(re.jwtTokenExpiry).asMinutes(),valueUnit:P("global.time.minutes.minute_other"),defaultValue:j.default,minValue:j.min,maxValue:j.max,handleUpdate:function(e){return W("jwtTokenExpiry",S.duration(e,"minute").toISOString())},showSlider:!0}),i.jsx(T,{settingTitle:P("settings.server.auth.jwt.refresh_token_expiry"),settingValue:S.duration(re.jwtRefreshExpiry).humanize(),value:S.duration(re.jwtRefreshExpiry).asDays(),valueUnit:P("global.time.days.day_other"),defaultValue:_.default,minValue:_.min,maxValue:_.max,handleUpdate:function(e){return W("jwtRefreshExpiry",S.duration(e,"day").toISOString())},showSlider:!0})]})]}),i.jsxs(g,{subheader:i.jsx(N,{component:"div",id:"server-settings-clouadflare-bypass",children:P("settings.server.cloudflare.title")}),children:[i.jsxs(f,{children:[i.jsx(p,{primary:P("settings.server.cloudflare.flaresolverr.enabled.label.title"),secondary:i.jsxs(A,{i18nKey:"settings.server.cloudflare.flaresolverr.enabled.label.description",children:["See"," ",i.jsx(L,{href:"https://github.com/FlareSolverr/FlareSolverr?tab=readme-ov-file#installation",target:"_blank",rel:"noreferrer",children:"FlareSolverr"})," ","for information on how to set it up"]})}),i.jsx(V,{edge:"end",checked:re.flareSolverrEnabled,onChange:function(e){return W("flareSolverrEnabled",e.target.checked)}})]}),i.jsx(U,{settingName:P("settings.server.cloudflare.flaresolverr.url.label.title"),dialogDescription:P("settings.server.cloudflare.flaresolverr.url.label.description"),value:re.flareSolverrUrl,handleChange:function(e){return W("flareSolverrUrl",e)}}),i.jsx(T,{settingTitle:P("settings.server.cloudflare.flaresolverr.timeout.label.title"),settingValue:P("global.time.seconds.value",{count:re.flareSolverrTimeout}),dialogDescription:P("settings.server.cloudflare.flaresolverr.timeout.label.description"),value:re.flareSolverrTimeout,defaultValue:60,minValue:20,maxValue:300,stepSize:1,showSlider:!0,valueUnit:P("global.time.seconds.second_other"),handleUpdate:function(e){return W("flareSolverrTimeout",e)}}),i.jsx(U,{settingName:P("settings.server.cloudflare.flaresolverr.session.name.label.title"),value:re.flareSolverrSessionName,handleChange:function(e){return W("flareSolverrSessionName",e)}}),i.jsx(T,{settingTitle:P("settings.server.cloudflare.flaresolverr.session.ttl.label.title"),settingValue:P("global.time.minutes.value",{count:re.flareSolverrSessionTtl}),dialogDescription:P("settings.server.cloudflare.flaresolverr.session.ttl.label.description"),value:re.flareSolverrSessionTtl,defaultValue:15,minValue:1,maxValue:60,stepSize:1,showSlider:!0,valueUnit:P("global.time.minutes.minute_other"),handleUpdate:function(e){return W("flareSolverrSessionTtl",e)}}),i.jsxs(f,{children:[i.jsx(p,{primary:P("settings.server.cloudflare.flaresolverr.response_fallback.label.title"),secondary:P("settings.server.cloudflare.flaresolverr.response_fallback.label.description")}),i.jsx(V,{edge:"end",checked:re.flareSolverrAsResponseFallback,onChange:function(e){return W("flareSolverrAsResponseFallback",e.target.checked)}})]})]}),i.jsxs(g,{subheader:i.jsx(N,{component:"div",id:"server-settings-opds",children:P("settings.server.opds.title")}),children:[i.jsxs(f,{children:[i.jsx(p,{primary:P("settings.server.opds.binary_file_sizes.label.title"),secondary:P("settings.server.opds.binary_file_sizes.label.description")}),i.jsx(V,{edge:"end",checked:re.opdsUseBinaryFileSizes,onChange:function(e){return W("opdsUseBinaryFileSizes",e.target.checked)}})]}),i.jsx(T,{settingTitle:P("settings.server.opds.items_per_page.label.title"),settingValue:re.opdsItemsPerPage.toString(),dialogDescription:P("settings.server.opds.items_per_page.label.description"),value:re.opdsItemsPerPage,defaultValue:50,minValue:10,maxValue:5e3,stepSize:10,showSlider:!0,valueUnit:P("settings.server.opds.items_per_page.label.unit_other"),handleUpdate:function(e){return W("opdsItemsPerPage",e)}}),i.jsxs(f,{children:[i.jsx(p,{primary:P("settings.server.opds.enable_page_read_progress.label.title"),secondary:P("settings.server.opds.enable_page_read_progress.label.description")}),i.jsx(V,{edge:"end",checked:re.opdsEnablePageReadProgress,onChange:function(e){return W("opdsEnablePageReadProgress",e.target.checked)}})]}),i.jsxs(f,{children:[i.jsx(p,{primary:P("settings.server.opds.mark_as_read_on_download.label.title"),secondary:P("settings.server.opds.mark_as_read_on_download.label.description")}),i.jsx(V,{edge:"end",checked:re.opdsMarkAsReadOnDownload,onChange:function(e){return W("opdsMarkAsReadOnDownload",e.target.checked)}})]}),i.jsxs(f,{children:[i.jsx(p,{primary:P("settings.server.opds.show_only_unread_chapters.label.title"),secondary:P("settings.server.opds.show_only_unread_chapters.label.description")}),i.jsx(V,{edge:"end",checked:re.opdsShowOnlyUnreadChapters,onChange:function(e){return W("opdsShowOnlyUnreadChapters",e.target.checked)}})]}),i.jsxs(f,{children:[i.jsx(p,{primary:P("settings.server.opds.show_only_downloaded_chapters.label.title"),secondary:P("settings.server.opds.show_only_downloaded_chapters.label.description")}),i.jsx(V,{edge:"end",checked:re.opdsShowOnlyDownloadedChapters,onChange:function(e){return W("opdsShowOnlyDownloadedChapters",e.target.checked)}})]}),i.jsx(E,{settingName:P("settings.server.opds.chapter_sort_order.label.title"),dialogDescription:P("settings.server.opds.chapter_sort_order.label.description"),value:re.opdsChapterSortOrder,values:[[k.Asc,{text:P("global.sort.label.asc")}],[k.Desc,{text:P("global.sort.label.desc")}]],handleChange:function(e){return W("opdsChapterSortOrder",e)}})]}),i.jsxs(g,{subheader:i.jsx(N,{component:"div",id:"server-settings-misc",children:P("settings.server.misc.title")}),children:[i.jsxs(f,{children:[i.jsx(p,{primary:P("settings.server.misc.log_level.label.server")}),i.jsx(V,{edge:"end",checked:re.debugLogsEnabled,onChange:function(e){return W("debugLogsEnabled",e.target.checked)}})]}),i.jsxs(f,{children:[i.jsx(p,{primary:P("settings.server.misc.tray_icon.label.title"),secondary:P("settings.server.misc.tray_icon.label.description")}),i.jsx(V,{edge:"end",checked:re.systemTrayEnabled,onChange:function(e){return W("systemTrayEnabled",e.target.checked)}})]}),i.jsx(T,{settingTitle:P("settings.server.misc.log_files.file_cleanup.title"),settingValue:z(re.maxLogFiles),value:re.maxLogFiles,valueUnit:P("global.date.label.day_one"),handleUpdate:function(e){return W("maxLogFiles",e)}}),i.jsx(U,{settingName:P("settings.server.misc.log_files.file_size.title"),value:re.maxLogFileSize,dialogDescription:P("settings.server.misc.log_files.file_size.description"),validate:function(e){return!!e.match(/^[0-9]+(|kb|KB|mb|MB|gb|GB)$/g)},handleChange:function(e){return W("maxLogFileSize",e)}}),i.jsx(U,{settingName:P("settings.server.misc.log_files.total_size.title"),value:re.maxLogFolderSize,dialogDescription:P("settings.server.misc.log_files.total_size.description"),validate:function(e){return!!e.match(/^[0-9]+(|kb|KB|mb|MB|gb|GB)$/g)},handleChange:function(e){return W("maxLogFolderSize",e)}})]})]})})}}})}();
