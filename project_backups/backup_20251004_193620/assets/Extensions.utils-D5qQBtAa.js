import{D as o,aA as U,l as D,bo as _,t as g,bp as P,$ as c,bq as b,r as A,m as p,g as x}from"./index-B3NSCdsi.js";var t=(e=>(e.UPDATE="UPDATE",e.UNINSTALL="UNINSTALL",e.INSTALL="INSTALL",e))(t||{}),r=(e=>(e.OBSOLETE="OBSOLETE",e.UPDATING="UPDATING",e.UNINSTALLING="UNINSTALLING",e.INSTALLING="INSTALLING",e))(r||{});const L={...t,...r};var s=(e=>(e.INSTALLED="INSTALLED",e.UPDATE_PENDING="UPDATE_PENDING",e.OBSOLETE="OBSOLETE",e))(s||{});const y={[t.UPDATE]:r.UPDATING,[t.UNINSTALL]:r.UNINSTALLING,[t.INSTALL]:r.INSTALLING},R={[t.UPDATE]:t.UNINSTALL,[t.UNINSTALL]:t.INSTALL,[t.INSTALL]:t.UNINSTALL},w={[L.UNINSTALL]:"extension.action.label.uninstall",[L.INSTALL]:"extension.action.label.install",[L.UPDATE]:"extension.action.label.update",[L.OBSOLETE]:"extension.state.label.obsolete",[L.UPDATING]:"extension.state.label.updating",[L.UNINSTALLING]:"extension.state.label.uninstalling",[L.INSTALLING]:"extension.state.label.installing"},B={[t.UPDATE]:"extension.label.update_failed",[t.INSTALL]:"extension.label.installation_failed",[t.UNINSTALL]:"extension.label.uninstallation_failed"},G={[s.INSTALLED]:"extension.state.label.installed",[s.UPDATE_PENDING]:"extension.state.label.update_pending",[s.OBSOLETE]:"extension.state.label.obsolete",[o.ALL]:"extension.language.all",[o.OTHER]:"extension.language.other",[o.LOCAL_SOURCE]:"extension.language.other",[o.PINNED]:"global.label.pinned",[o.LAST_USED_SOURCE]:"global.label.last_used"},M=(e,l,N)=>l?L.OBSOLETE:N?L.UPDATE:e?L.UNINSTALL:L.INSTALL,f=e=>[s.INSTALLED,s.UPDATE_PENDING,s.OBSOLETE].includes(e),m=e=>[o.PINNED,o.LAST_USED_SOURCE].includes(e),C=e=>f(e)||m(e)||[o.ALL,o.OTHER,o.LOCAL_SOURCE].includes(e),v=e=>C(e)?U(G[e]):D(e);function j(e){const l=Object.groupBy(e,a=>a.isInstalled?a.hasUpdate?s.UPDATE_PENDING:a.isObsolete?s.OBSOLETE:s.INSTALLED:a.lang);return Object.entries(l).toSorted(([a],[n])=>{const i=Object.values(s),E=i.includes(a),O=s.OBSOLETE===a,S=s.UPDATE_PENDING===a,I=i.includes(n),u=s.OBSOLETE===n,d=s.UPDATE_PENDING===n;return O||E&&!I||S&&!u?-1:u||!E&&I||!S&&d?1:b(a,n)}).map(([a,n])=>[a,(n!=null?n:[]).toSorted((i,E)=>i.name.localeCompare(E.name))]).filter(([,a])=>!!a.length)}const X=e=>[...new Set(e.map(l=>l.lang))],k=(e,{selectedLanguages:l,showNsfw:N,query:T}={})=>{const a=_(g(l!=null?l:[]));return e.filter(n=>!l||a.includes(P(n.lang))||n.isInstalled).filter(n=>N===void 0||N||!n.isNsfw).filter(n=>T==null||c(n.name).includes(c(T)))},K=async(e,l,N)=>{try{switch(N){case t.INSTALL:await A.updateExtension(e,{install:!0,isObsolete:l}).response;break;case t.UNINSTALL:await A.updateExtension(e,{uninstall:!0,isObsolete:l}).response;break;case t.UPDATE:await A.updateExtension(e,{update:!0,isObsolete:l}).response;break;default:throw new Error('Unexpected ExtensionAction "'.concat(N,'"'))}}catch(T){throw p(U(B[N],{count:1}),"error",x(T)),T}};export{r as E,w as I,L as a,t as b,y as c,R as d,X as e,k as f,M as g,j as h,m as i,s as j,B as k,v as t,K as u};
