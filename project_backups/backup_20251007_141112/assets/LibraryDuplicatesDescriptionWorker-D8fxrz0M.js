(function(){"use strict";const T=t=>t.toLowerCase().trim(),p=t=>T(t).normalize("NFKC").replace(/[^\p{L}\p{N}]+/gu," ").trim(),h=(t,u)=>{const n=p(t.title),s={byTitle:[t],byAlternativeTitle:[t]};return u.forEach(i=>{var l;if(!(t.id!==i.id))return;const e=p(i.title)===n,o=p((l=i==null?void 0:i.description)!=null?l:"").includes(n);(e||o)&&(e&&s.byTitle.push(i),o&&s.byAlternativeTitle.push(i))}),s},A=(t,u=t)=>{const n={},s={};t.forEach(c=>{var l,f;const e=p(c.title);(l=n[e])!=null||(n[e]=[]),(f=s[e])!=null||(s[e]=[]);const{byTitle:o,byAlternativeTitle:r}=h(c,u);n[e].push(...o),s[e].push(...r)});const i=Object.entries(n).map(([c,e])=>{var D;const o=new Set(e),r=new Set((D=s[c])!=null?D:[]),l=[...o][0].title,f=[...o,...r],d=[...new Set([...f])];return d.length===1?null:[l,d]}).filter(c=>!!c);return Object.fromEntries(i)};self.onmessage=t=>{const{mangasToCheck:u,mangas:n}=t.data;postMessage(A(u,n))}})();
